import React from "react";
import { useState } from "react";
import { motion } from "framer-motion";
import { GraduationCap, Award, FlaskConical, Hammer, Mail, MapPin, Download, Github, Linkedin, Globe, ChevronRight } from "lucide-react";

// ======== å¯ç¼–è¾‘çš„æ•°æ®åŒºï¼ˆæŠŠå ä½å†…å®¹æ¢æˆä½ çš„çœŸå®ä¿¡æ¯ï¼‰ ========
const PROFILE = {
  name: "ä½ çš„å§“å",
  title: "ä½ çš„èº«ä»½/æ–¹å‘ï¼ˆå¦‚ï¼šè®¡ç®—æœºç§‘å­¦æœ¬ç§‘ç”Ÿ / å‰ç«¯å¼€å‘ / æ•°æ®ç§‘å­¦ï¼‰",
  location: "åŸå¸‚, å›½å®¶",
  contactEmail: "you@example.com",
  avatar: "https://images.unsplash.com/photo-1527980965255-d3b416303d12?w=400&h=400&fit=crop&auto=format", // æ›¿æ¢ä¸ºä½ çš„å¤´åƒé“¾æ¥
  summary:
    "ä¸€å¥è¯æ€»ç»“ä½ çš„ç‰¹é•¿/å…´è¶£é¢†åŸŸã€‚å†è¡¥å…… 1-2 å¥è¯´æ˜ä½ åœ¨åšä»€ä¹ˆã€æ“…é•¿ä»€ä¹ˆã€å¸Œæœ›æ‰¾åˆ°æ€æ ·çš„æœºä¼šã€‚",
  links: {
    github: "https://github.com/yourname",
    linkedin: "https://www.linkedin.com/in/yourname/",
    website: "https://yourdomain.com",
    resume: "/resume.pdf", // ç®€å† PDF çš„è·¯å¾„ï¼ˆæ”¾åˆ° public ç›®å½•ï¼‰
  },
  basics: [
    { label: "å­¦æ ¡", value: "XX å¤§å­¦" },
    { label: "å­¦é™¢/ç³»", value: "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯å­¦é™¢" },
    { label: "ä¸“ä¸š", value: "è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯" },
    { label: "å­¦ä½", value: "æœ¬ç§‘ï¼ˆ201Xâ€“202Xï¼‰" },
    { label: "ç»©ç‚¹/æ’å", value: "GPA 3.8/4.0ï¼ˆå‰ 10%ï¼‰" },
    { label: "æŠ€èƒ½", value: "C++ / Python / JavaScript / React / PyTorch / æ•°æ®ç»“æ„ä¸ç®—æ³•" },
  ],
};

const COMPETITIONS = [
  {
    name: "ACM-ICPC åŒºåŸŸèµ›",
    level: "é“¶å¥–",
    org: "ICPC",
    date: "2024-11",
    team: "é˜Ÿä¼åç§° / è§’è‰²ï¼ˆé˜Ÿé•¿/è§£é¢˜æ‰‹ï¼‰",
    highlights: [
      "åŒºåŸŸæ’åå‰ 5%ï¼Œè§£å†³ 8/12 é¢˜",
      "è´Ÿè´£å›¾è®ºä¸åŠ¨æ€è§„åˆ’æ–¹å‘ï¼Œå¹³å‡æ¯é¢˜ 30 åˆ†é’Ÿå†…æäº¤"
    ],
    link: "#",
  },
  {
    name: "ä¸­å›½å¤§å­¦ç”Ÿæ•°å­¦å»ºæ¨¡ç«èµ›",
    level: "çœä¸€",
    org: "é«˜æ•™ç¤¾æ¯",
    date: "2023-09",
    team: "ä¸‰äººå›¢é˜Ÿ / ä½ è´Ÿè´£å»ºæ¨¡ä¸å¯è§†åŒ–",
    highlights: [
      "æ„å»ºæ—¶é—´åºåˆ—é¢„æµ‹æ¨¡å‹ï¼ˆLSTMï¼‰ï¼ŒMAPE é™è‡³ 6.2%",
      "æ’°å†™ 25 é¡µæŠ€æœ¯æŠ¥å‘Šå¹¶å®Œæˆå¯è§†åŒ–æ¼”ç¤º"
    ],
    link: "#",
  },
];

const PROJECTS = [
  {
    title: "å®æ—¶æ ¡å›­å‡ºè¡Œå¯è§†åŒ–å¹³å°",
    role: "å…¨æ ˆå¼€å‘",
    period: "2024.03â€“2024.07",
    tech: ["Next.js", "TailwindCSS", "WebSocket", "Mapbox GL"],
    description:
      "æ•´åˆå®æ—¶å…¬äº¤/å…±äº«å•è½¦æ•°æ®ï¼Œæä¾›è·¯çº¿è§„åˆ’ä¸æ‹¥å µçƒ­åŠ›å›¾ã€‚",
    impact: [
      "æ—¥æ´» 2,000+ï¼Œå¹³å‡å“åº”æ—¶é—´ 180ms",
      "å¼•å…¥å¢é‡æ¸²æŸ“å°†é¦–å± LCP ä» 3.1s é™è‡³ 1.8s"
    ],
    links: { demo: "#", code: "#", post: "#" },
    cover: "https://images.unsplash.com/photo-1552083375-1447ce886485?w=1200&h=600&fit=crop&auto=format",
  },
  {
    title: "ç»†ç²’åº¦å›¾åƒåˆ†ç±»ï¼ˆæ¯•ä¸šè®¾è®¡ï¼‰",
    role: "ç®—æ³•å·¥ç¨‹",
    period: "2023.10â€“2024.06",
    tech: ["PyTorch", "ResNet50", "SAM", "Weights & Biases"],
    description:
      "åœ¨ç»†ç²’åº¦é¸Ÿç±»æ•°æ®é›†ä¸Šè¿›è¡Œè¿ç§»å­¦ä¹ ä¸æ•°æ®å¢å¼ºï¼Œæå‡å°æ ·æœ¬åˆ†ç±»æ•ˆæœã€‚",
    impact: [
      "Top-1 å‡†ç¡®ç‡ 92.4%ï¼ˆ+4.7%ï¼‰",
      "è®­ç»ƒæ—¶é•¿ç¼©çŸ­ 35%ï¼Œæ¨ç†å»¶è¿Ÿ 28ms"
    ],
    links: { code: "#", paper: "#" },
    cover: "https://images.unsplash.com/photo-1510936111840-65e151ad71bb?w=1200&h=600&fit=crop&auto=format",
  },
];

const RESEARCH = [
  {
    title: "Paper A: Efficient Graph Neural Networks for Traffic Forecasting",
    venue: "IEEE BigData Workshop",
    date: "2024-12",
    authors: ["ä½ çš„å§“å", "åˆä½œè€…1", "åˆä½œè€…2"],
    highlights: [
      "æå‡ºè½»é‡åŒ– GNN æ¨¡å—ï¼Œå°†å‚æ•°é‡å‡å°‘ 38%",
      "åœ¨ PeMS-Bay ä¸Š MAE é™ä½ 9.3%"
    ],
    links: { paper: "#", code: "#", slide: "#" },
  },
  {
    title: "Paper B: Prompting for Code Generation in Education Tools",
    venue: "arXiv",
    date: "2023-08",
    authors: ["ä½ çš„å§“å", "åˆä½œè€… A"],
    highlights: [
      "æ„å»ºåŸºäºå¤§æ¨¡å‹çš„ç¼–ç¨‹å­¦ä¹ åŠ©æ•™åŸå‹",
      "åœ¨çœŸå®è¯¾ç¨‹ä¸­ A/B æå‡ä½œä¸šé€šè¿‡ç‡ 12%"
    ],
    links: { paper: "#" },
  },
];

// ======== ç»„ä»¶æ ·å¼å·¥å…· ========
const Section = ({ id, icon: Icon, title, children }: any) => (
  <section id={id} className="scroll-mt-24 py-14 sm:py-20">
    <div className="max-w-5xl mx-auto px-4">
      <div className="flex items-center gap-3 mb-6">
        <div className="p-2 rounded-2xl bg-gray-100 dark:bg-gray-800"><Icon className="w-5 h-5" /></div>
        <h2 className="text-2xl sm:text-3xl font-semibold">{title}</h2>
      </div>
      {children}
    </div>
  </section>
);

const Card = ({ children, className = "" }: any) => (
  <div className={`rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm p-5 bg-white/70 dark:bg-gray-900/70 backdrop-blur ${className}`}>{children}</div>
);

const Chip = ({ children }: any) => (
  <span className="px-2 py-1 text-xs rounded-full border border-gray-300 dark:border-gray-700">{children}</span>
);

// ======== é¡µé¢ ========
export default function PersonalSite() {
  const [theme, setTheme] = useState<'light' | 'dark'>(() => 'light');

  return (
    <div className={theme === 'dark' ? 'dark' : ''}>
      <div className="min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-black dark:to-gray-950 text-gray-900 dark:text-gray-100">
        {/* é¡¶éƒ¨å¯¼èˆª */}
        <header className="sticky top-0 z-50 border-b border-gray-200/60 dark:border-gray-800/60 backdrop-blur bg-white/70 dark:bg-black/50">
          <div className="max-w-5xl mx-auto px-4 h-14 flex items-center justify-between">
            <a href="#top" className="font-semibold">{PROFILE.name}</a>
            <nav className="hidden sm:flex items-center gap-5 text-sm">
              <a href="#basics" className="hover:underline">åŸºæœ¬ä¿¡æ¯</a>
              <a href="#competitions" className="hover:underline">ç«èµ›</a>
              <a href="#projects" className="hover:underline">é¡¹ç›®</a>
              <a href="#research" className="hover:underline">ç§‘ç ”</a>
              <a href="#contact" className="hover:underline">è”ç³»</a>
            </nav>
            <div className="flex items-center gap-2">
              <button onClick={() => setTheme(t => t === 'dark' ? 'light' : 'dark')} className="text-xs border rounded-xl px-2 py-1">
                {theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™'}
              </button>
              {PROFILE.links.resume && (
                <a href={PROFILE.links.resume} className="text-xs border rounded-xl px-2 py-1 flex items-center gap-1"><Download className="w-3 h-3"/> ç®€å†</a>
              )}
            </div>
          </div>
        </header>

        {/* é¦–å± / Hero */}
        <main id="top" className="relative">
          <section className="max-w-5xl mx-auto px-4 pt-10 sm:pt-16">
            <div className="grid grid-cols-1 sm:grid-cols-[auto,1fr] gap-6 items-center">
              <motion.img
                initial={{ opacity: 0, scale: 0.95 }}
                animate={{ opacity: 1, scale: 1 }}
                transition={{ duration: 0.6 }}
                src={PROFILE.avatar}
                alt="avatar"
                className="w-28 h-28 rounded-2xl object-cover border border-gray-200 dark:border-gray-800"
              />
              <div>
                <h1 className="text-2xl sm:text-4xl font-bold tracking-tight">{PROFILE.name}</h1>
                <p className="mt-2 text-gray-600 dark:text-gray-400">{PROFILE.title}</p>
                <div className="mt-3 flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400">
                  <span className="inline-flex items-center gap-1"><MapPin className="w-4 h-4" />{PROFILE.location}</span>
                  <a href={`mailto:${PROFILE.contactEmail}`} className="inline-flex items-center gap-1 hover:underline"><Mail className="w-4 h-4" />{PROFILE.contactEmail}</a>
                </div>
                <p className="mt-4 max-w-2xl leading-7">{PROFILE.summary}</p>
                <div className="mt-4 flex flex-wrap items-center gap-3">
                  {PROFILE.links.github && <a className="text-sm inline-flex items-center gap-1 border rounded-xl px-3 py-1" href={PROFILE.links.github}><Github className="w-4 h-4"/>GitHub</a>}
                  {PROFILE.links.linkedin && <a className="text-sm inline-flex items-center gap-1 border rounded-xl px-3 py-1" href={PROFILE.links.linkedin}><Linkedin className="w-4 h-4"/>LinkedIn</a>}
                  {PROFILE.links.website && <a className="text-sm inline-flex items-center gap-1 border rounded-xl px-3 py-1" href={PROFILE.links.website}><Globe className="w-4 h-4"/>Website</a>}
                </div>
              </div>
            </div>
          </section>

          {/* åŸºæœ¬ä¿¡æ¯ */}
          <Section id="basics" icon={GraduationCap} title="ä¸ªäººåŸºæœ¬ä¿¡æ¯">
            <Card>
              <dl className="grid sm:grid-cols-2 gap-x-6 gap-y-3">
                {PROFILE.basics.map((item, idx) => (
                  <div key={idx} className="flex">
                    <dt className="w-24 shrink-0 text-gray-500 dark:text-gray-400">{item.label}</dt>
                    <dd className="flex-1 font-medium">{item.value}</dd>
                  </div>
                ))}
              </dl>
            </Card>
          </Section>

          {/* ç«èµ›ç»å† */}
          <Section id="competitions" icon={Award} title="ç«èµ›ç»å†">
            <div className="grid gap-4">
              {COMPETITIONS.map((c, i) => (
                <Card key={i}>
                  <div className="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3">
                    <div>
                      <div className="flex items-center gap-2 flex-wrap">
                        <h3 className="text-lg font-semibold">{c.name}</h3>
                        <Chip>{c.level}</Chip>
                        <span className="text-sm text-gray-500">{c.org}</span>
                      </div>
                      <div className="mt-1 text-sm text-gray-500">{c.date} Â· {c.team}</div>
                      <ul className="mt-3 list-disc pl-5 space-y-1">
                        {c.highlights.map((h, idx) => (<li key={idx}>{h}</li>))}
                      </ul>
                    </div>
                    {c.link && (
                      <a href={c.link} className="text-sm inline-flex items-center gap-1 self-start mt-1 sm:mt-0">
                        æŸ¥çœ‹è¯¦æƒ… <ChevronRight className="w-4 h-4"/>
                      </a>
                    )}
                  </div>
                </Card>
              ))}
            </div>
          </Section>

          {/* é¡¹ç›®ç»å† */}
          <Section id="projects" icon={Hammer} title="é¡¹ç›®ç»å†">
            <div className="grid md:grid-cols-2 gap-5">
              {PROJECTS.map((p, i) => (
                <Card key={i}>
                  {p.cover && (
                    <img src={p.cover} alt={p.title} className="w-full h-40 object-cover rounded-xl mb-3" />
                  )}
                  <div className="flex items-center gap-2 flex-wrap">
                    <h3 className="text-lg font-semibold">{p.title}</h3>
                    <Chip>{p.role}</Chip>
                    <span className="text-sm text-gray-500">{p.period}</span>
                  </div>
                  <p className="mt-2 text-sm text-gray-600 dark:text-gray-400">{p.description}</p>
                  <div className="mt-2 flex flex-wrap gap-2">
                    {p.tech.map((t, idx) => (<Chip key={idx}>{t}</Chip>))}
                  </div>
                  {p.impact?.length ? (
                    <ul className="mt-3 list-disc pl-5 space-y-1">
                      {p.impact.map((h, idx) => (<li key={idx} className="text-sm">{h}</li>))}
                    </ul>
                  ) : null}
                  {(p.links?.demo || p.links?.code || p.links?.post) && (
                    <div className="mt-3 flex flex-wrap gap-3 text-sm">
                      {p.links.demo && <a className="inline-flex items-center gap-1" href={p.links.demo}>Demo <ChevronRight className="w-4 h-4"/></a>}
                      {p.links.code && <a className="inline-flex items-center gap-1" href={p.links.code}>GitHub <ChevronRight className="w-4 h-4"/></a>}
                      {p.links.post && <a className="inline-flex items-center gap-1" href={p.links.post}>æ–‡ç«  <ChevronRight className="w-4 h-4"/></a>}
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </Section>

          {/* ç§‘ç ”ç»å† */}
          <Section id="research" icon={FlaskConical} title="ç§‘ç ”ç»å†">
            <div className="grid gap-4">
              {RESEARCH.map((r, i) => (
                <Card key={i}>
                  <div className="flex items-center gap-2 flex-wrap">
                    <h3 className="text-lg font-semibold">{r.title}</h3>
                    <Chip>{r.venue}</Chip>
                    <span className="text-sm text-gray-500">{r.date}</span>
                  </div>
                  <div className="mt-1 text-sm text-gray-600 dark:text-gray-400">ä½œè€…ï¼š{r.authors.join(', ')}</div>
                  <ul className="mt-3 list-disc pl-5 space-y-1">
                    {r.highlights.map((h, idx) => (<li key={idx} className="text-sm">{h}</li>))}
                  </ul>
                  {(r.links?.paper || r.links?.code || r.links?.slide) && (
                    <div className="mt-3 flex flex-wrap gap-3 text-sm">
                      {r.links.paper && <a className="inline-flex items-center gap-1" href={r.links.paper}>è®ºæ–‡ <ChevronRight className="w-4 h-4"/></a>}
                      {r.links.code && <a className="inline-flex items-center gap-1" href={r.links.code}>ä»£ç  <ChevronRight className="w-4 h-4"/></a>}
                      {r.links.slide && <a className="inline-flex items-center gap-1" href={r.links.slide}>Slides <ChevronRight className="w-4 h-4"/></a>}
                    </div>
                  )}
                </Card>
              ))}
            </div>
          </Section>

          {/* è”ç³»æ–¹å¼ */}
          <Section id="contact" icon={Mail} title="è”ç³»æˆ‘">
            <Card>
              <p className="text-sm text-gray-600 dark:text-gray-400">æ¬¢è¿å°±å®ä¹  / å…¨èŒ / åˆä½œäº¤æµï¼š</p>
              <div className="mt-3 flex flex-wrap items-center gap-3">
                <a className="inline-flex items-center gap-2 border rounded-xl px-3 py-1" href={`mailto:${PROFILE.contactEmail}`}>
                  <Mail className="w-4 h-4"/> {PROFILE.contactEmail}
                </a>
                {PROFILE.links.github && <a className="inline-flex items-center gap-2 border rounded-xl px-3 py-1" href={PROFILE.links.github}><Github className="w-4 h-4"/>GitHub</a>}
                {PROFILE.links.linkedin && <a className="inline-flex items-center gap-2 border rounded-xl px-3 py-1" href={PROFILE.links.linkedin}><Linkedin className="w-4 h-4"/>LinkedIn</a>}
                {PROFILE.links.website && <a className="inline-flex items-center gap-2 border rounded-xl px-3 py-1" href={PROFILE.links.website}><Globe className="w-4 h-4"/>Website</a>}
              </div>
            </Card>
          </Section>
        </main>

        {/* é¡µè„š */}
        <footer className="py-10 text-center text-sm text-gray-500">
          Â© {new Date().getFullYear()} {PROFILE.name}. All rights reserved.
        </footer>
      </div>
    </div>
  );
}
